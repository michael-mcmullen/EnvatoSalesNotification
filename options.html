<html>
	<head>
		<title>
			envato sales notification
		</title>
		<link rel="stylesheet" href="css/options.css" type="text/css" />
	</head>
	<body onload="settings_restore()">
		<div id="wrapper">
			<div id="header">
				<img src="images/logo.png" alt="envato sales notification" />
			</div>
			<div id="settings">
				<h1>
					envato settings
				</h1>
				
				<table cellpadding="0" cellspacing="0" width="100%">
					<tbody>
						<tr>
							<th>
								username
							</th>
							<td>
								<input type="text" id="envato[username]" value="" />
							</td>
						</tr>
						<tr>
							<th>
								api key
							</th>
							<td>
								<input type="text" id="envato[key]" value="" />
							</td>
						</tr>
						<tr>
							<th>
								polling (in minutes)
							</th>
							<td>
								<input type="text" id="envato[polling]" value="" />
							</td>
						</tr>
						<tr>
							<th>
								home page
							</th>
							<td>
								<select id="envato[home]" class="select">
									<option value="http://3docean.net/">
										3dOcean
									</option>
									<option value="http://activeden.net/">
										ActiveDen
									</option>
									<option value="http://audiojungle.net/">
										AudioJungle
									</option>
									<option value="http://codecanyon.net/">
										CodeCanyon
									</option>
									<option value="http://graphicriver.net/">
										GraphicRiver
									</option>
									<option value="http://themeforest.net/">
										Themeforest
									</option>
									<option value="http://marketplace.tutsplus.com/">
										Tutorials
									</option>
									<option value="http://videohive.net/">
										VideoHive
									</option>
								</select>
							</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<td colspan="2" style="text-align: right;">
								<div id="message"></div>
								<button class="button" onclick="settings_save(); return false;">
									Save Settings
								</button>
						</tr>
					</tfoot>
				</table>
				
				<div id="authors">
					<h1>
						Authors
					</h1>
					<ul>
						<li>
							Tutelage Systems
							<ul>
								<li>
									<a href="http://www.tutelagesystems.com">http://www.tutelagesystems.com</a>
								</li>
							</ul>
						</li>
						<li>
							Povesteam
							<ul>
								<li>
									<a href="http://videohive.net/user/povesteam">http://videohive.net/user/povesteam</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
				
				<div id="changelog">
					<h1>
						Change Log
					</h1>
					
					<ul>
						<li>
							2.1 - September 9th, 2012
							<ul>
								<li>
									Clicking on the icon will take you to your statement page
								</li>
								<li>
									Icon number will only show when a sale has occurred
								</li>
								<li>
									Clicking on the icon will take you to your statement page 
								</li>
								<li>
									Sales notification will show multiple sales in the same window
								</li>
							</ul>
						</li>
						<li>
							2.0
							<ul>
								<li>
									Moved to the new Envato API
								</li>
							</ul>
						</li>
						<li>
							1.9
							<ul>
								<li>
									Fixed Notification Bug
								</li>
								<li>
									Added Tutorials to Market Place Switcher
								</li>
							</ul>
						</li>
						<li>
							1.8
							<ul>
								<li>
									Added Desktop Notifications
								</li>
							</ul>
						</li>
						<li>
							1.7
							<ul>
								<li>
									Added Change Log
								</li>
							</ul>
						</li>
						<li>
							1.6
							<ul>
								<li>
									Changed API Error time out wait to 65 minutes
								</li>
							</ul>
						</li>
						<li>
							1.5
							<ul>
								<li>
									Added API Error time out
								</li>
							</ul>
						</li>
						<li>
							1.4
							<ul>
								<li>
									Changed Polling Option
								</li>
							</ul>
						</li>
						<li>
							1.3
							<ul>
								<li>
									Added Option Footer
								</li>
							</ul>
						</li>
						<li>
							1.2
							<ul>
								<li>
									Testing Updates
								</li>
							</ul>
						</li>
						<li>
							1.1
							<ul>
								<li>
									Added Update Functionalilty
								</li>
							</ul>
						</li>
						<li>
							1.0
							<ul>
								<li>
									Initial Release
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
			<div id="footer">
				Copyright &copy; 2010 <a href="http://codecanyon.net/user/TutelageSystems?ref=TutelageSystems" target="_blank">Tutelage Systems</a>
			</div>
		</div>
		
		
		<script>
			function settings_save()
			{
				// Grab Elements
				var envato_username = document.getElementById("envato[username]");
				var envato_key 			= document.getElementById("envato[key]");
				var envato_polling 	= document.getElementById("envato[polling]");
				var envato_home 		= document.getElementById("envato[home]");
				var status_element 	= document.getElementById("message");
				
				// Checks
				if(parseInt(envato_polling) <= 0) {
					envato_polling = 5;
				}
				// Store into local storage
				localStorage["envato_username"]	= envato_username.value;
				localStorage["envato_key"]			= envato_key.value;
				localStorage["envato_polling"]	= envato_polling.value;
				localStorage["envato_home"]			= envato_home.children[envato_home.selectedIndex].value;;
				
				// Set status
				status_element.innerHTML = "Settings Saved Successfully";
				setTimeout(function() {
  				status_element.innerHTML = "";
  			}, 1500);
  			
  			bg = chrome.extension.getBackgroundPage();
  			setTimeout(bg.polling, 0); // Run Immediately
			}
			
			function settings_restore()
			{
				// Grab Elements
				var envato_username = document.getElementById("envato[username]");
				var envato_key 			= document.getElementById("envato[key]");
				var envato_polling 	= document.getElementById("envato[polling]");
				var envato_home 		= document.getElementById("envato[home]");
				var status_element 	= document.getElementById("message");
				
				// Load from local storage
				envato_username.value	= localStorage["envato_username"];
				envato_key.value 			= localStorage["envato_key"];
				envato_polling.value	= localStorage["envato_polling"];
					
				for(var i = 0; i < envato_home.children.length; i++) {
					var child = envato_home.children[i];
					if(child.value == localStorage["envato_home"]) {
						child.selected = "true";
						break;
					}
				}
				
				// Check for undefined
				if(!localStorage["envato_username"]){ envato_username.value = ''; }
				if(!localStorage["envato_key"]){ envato_key.value = ''; }
				if(!localStorage["envato_polling"]){ envato_polling.value = '5'; }
			}
			
			function reset_date()
			{
				localStorage["envato_sale"] = Date.parse("June 02, 1983 12:00:00");
			}
		</script>
	</body>
</html>